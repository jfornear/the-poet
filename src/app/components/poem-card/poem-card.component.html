<mat-card class="poem-card">
  <mat-card-header>
    <mat-card-title>{{ poem.title }}</mat-card-title>
    <mat-card-subtitle>
      <div class="author">by {{ poem.author }}</div>
      <div *ngIf="relevanceScore" class="relevance" [class]="relevanceClass">
        <mat-icon class="material-symbols-rounded">trending_up</mat-icon>
        {{ relevancePercentage }}% match
      </div>
    </mat-card-subtitle>
  </mat-card-header>

  <mat-card-content>
    <div class="poem-content">
      <div class="poem-lines">
        <p *ngFor="let line of previewLines" [class.empty-line]="!line.trim()">
          {{ line || '&nbsp;' }}
        </p>
      </div>
      
      <button *ngIf="hasMoreLines" mat-button color="primary" (click)="toggleFullPoem()">
        <mat-icon class="material-symbols-rounded">{{ showFullPoem ? 'expand_less' : 'expand_more' }}</mat-icon>
        {{ showFullPoem ? 'Show Less' : 'Show More' }}
      </button>
    </div>

    <mat-divider></mat-divider>

    <div class="poem-info">
      <span class="line-count">
        <mat-icon class="material-symbols-rounded">format_list_numbered</mat-icon>
        {{ poem.linecount }} lines
      </span>
    </div>
  </mat-card-content>

  <mat-card-actions align="end">
    <button mat-button color="primary">
      <mat-icon class="material-symbols-rounded">share</mat-icon>
      Share
    </button>
    <button mat-button color="accent">
      <mat-icon class="material-symbols-rounded">bookmark</mat-icon>
      Save
    </button>
  </mat-card-actions>
</mat-card>
